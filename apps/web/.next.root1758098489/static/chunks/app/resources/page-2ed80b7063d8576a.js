(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{526:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var s=r(2821),a=r(5889);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},1799:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var s=r(5155),a=r(2115),l=r(2454),n=r(549),i=r(8185),c=r(7621),o=r(6816);function d(){let[e,t]=(0,a.useState)({title:"",type:"",content:""}),[r,d]=(0,a.useState)(""),[u,x]=(0,a.useState)(null),m=(0,l.I)({queryKey:["resources"],staleTime:6e4,gcTime:3e5,queryFn:()=>(0,c.nr)("/api/v1/resources")}),f=(0,a.useMemo)(()=>{var e;return null!=(e=m.data)?e:[]},[m.data]),p=(0,a.useMemo)(()=>{let e=r.trim().toLowerCase();return e?f.filter(t=>{var r;let s=t.title.toLowerCase(),a=(null!=(r=t.type)?r:"").toLowerCase();return s.includes(e)||a.includes(e)}):f},[f,r]),b=(0,n.n)({mutationFn:async e=>(0,c.nr)("/api/v1/resources",{method:"POST",body:JSON.stringify(e)}),onSuccess:async()=>{x(null),t({title:"",type:"",content:""}),await m.refetch()},onError:e=>{if(e instanceof c.hD){let t="object"==typeof e.info&&null!==e.info?e.info.detail:null;x(null!=t?t:e.message);return}x("Не удалось создать ресурс")}}),v=!m.isLoading&&0===p.length,h=m.error,g=h?h instanceof c.hD?h.message:"Не удалось загрузить данные":null;return(0,s.jsxs)(i.A,{title:"Ресурсы",description:"Соберите ключевые документы, ссылки и материалы рядом с проектами PARA.",children:[(0,s.jsxs)(o.M7,{children:[(0,s.jsxs)("label",{className:"flex flex-1 items-center gap-2",htmlFor:"resource-search",children:[(0,s.jsx)("span",{className:"text-muted","aria-hidden":!0,children:(0,s.jsx)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5a6 6 0 015.2 8.94l3.43 3.43a1 1 0 01-1.42 1.42l-3.43-3.43A6 6 0 1111 5z"})})}),(0,s.jsx)(o.pd,{id:"resource-search",type:"search",inputMode:"search",placeholder:"Поиск ресурсов",value:r,onChange:e=>d(e.target.value),className:"bg-transparent placeholder:text-muted"})]}),(0,s.jsxs)("span",{className:"text-sm text-muted",children:[f.length," всего"]})]}),(0,s.jsxs)(o.Zp,{surface:"soft",children:[(0,s.jsx)("h2",{className:"text-base font-semibold text-[var(--text-primary)]",children:"Новый ресурс"}),(0,s.jsxs)("form",{className:"mt-4 grid gap-4 md:grid-cols-2",onSubmit:t=>{if(t.preventDefault(),!e.title.trim())return void x("Введите заголовок");b.mutate({title:e.title.trim(),type:e.type.trim()||null,content:e.content.trim()||null})},children:[(0,s.jsx)(o.D0,{label:"Заголовок",required:!0,className:"md:col-span-2",htmlFor:"resource-title",children:(0,s.jsx)(o.pd,{id:"resource-title",value:e.title,onChange:e=>t(t=>({...t,title:e.target.value})),placeholder:"Например, Руководство по запуску",required:!0})}),(0,s.jsx)(o.D0,{label:"Тип (опционально)",htmlFor:"resource-type",children:(0,s.jsx)(o.pd,{id:"resource-type",value:e.type,onChange:e=>t(t=>({...t,type:e.target.value})),placeholder:"Документ, Ссылка, Видео"})}),(0,s.jsx)(o.D0,{label:"Описание / примечание (опционально)",className:"md:col-span-2",htmlFor:"resource-content",children:(0,s.jsx)(o.TM,{id:"resource-content",rows:3,value:e.content,onChange:e=>t(t=>({...t,content:e.target.value})),placeholder:"Ссылка, файлы или краткое описание содержимого",className:"min-h-[96px]"})}),u?(0,s.jsx)("div",{className:"md:col-span-2 rounded-xl border border-red-200 bg-red-50 px-3 py-2 text-sm text-red-600",role:"alert",children:u}):null,(0,s.jsx)("div",{className:"md:col-span-2 flex items-center justify-end",children:(0,s.jsx)(o.$n,{type:"submit",disabled:b.isPending,children:b.isPending?"Сохраняем…":"Добавить ресурс"})})]})]}),g?(0,s.jsx)(o.Zp,{className:"border-red-200/80 bg-red-50 text-sm text-red-700",children:g}):null,v?(0,s.jsx)(o.Zp,{surface:"soft",className:"text-sm text-muted",children:"Ресурсы не найдены. Добавьте первый артефакт или измените условия поиска."}):(0,s.jsx)("div",{className:"grid gap-3",children:p.map(e=>(0,s.jsxs)(o.Zp,{className:"flex flex-col gap-2",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-base font-semibold text-[var(--text-primary)]",children:e.title}),e.type?(0,s.jsx)("div",{className:"text-xs uppercase tracking-wide text-muted",children:e.type}):null]}),(0,s.jsxs)("span",{className:"text-xs font-mono text-muted",children:["ID ",e.id]})]}),e.content?(0,s.jsx)("p",{className:"text-sm text-muted",children:e.content}):null,(0,s.jsxs)("div",{className:"text-xs text-muted",children:["Обновлено ",new Date(e.updated_at).toLocaleString("ru-RU")]})]},e.id))})]})}},6128:(e,t,r)=>{"use strict";r.d(t,{w:()=>n});var s=r(5155);r(2115);var a=r(526);let l={none:"gap-0",sm:"gap-3",md:"gap-4",lg:"gap-6"};function n(e){let{spacing:t="md",className:r,children:n,...i}=e;return(0,s.jsx)("section",{className:(0,a.cn)("flex flex-col",l[t],r),...i,children:n})}},6816:(e,t,r)=>{"use strict";r.d(t,{Ex:()=>n,$n:()=>o,Zp:()=>d,Sc:()=>u,pp:()=>x,D0:()=>m,pd:()=>f,l6:()=>p,TM:()=>b,M7:()=>v});var s=r(5155),a=r(2115),l=r(526);function n(e){let{tone:t="accent",size:r="md",uppercase:a=!0,className:n,children:i,...c}=e;return(0,s.jsx)("span",{className:(0,l.cn)("inline-flex items-center rounded-full font-medium tracking-wide",a&&"uppercase","accent"===t?"bg-[var(--accent-primary-soft)] text-[var(--text-primary)]":"success"===t?"bg-emerald-100 text-emerald-700":"warning"===t?"bg-amber-100 text-amber-700":"bg-surface-soft text-muted","sm"===r?"px-2 py-0.5 text-[0.65rem]":"px-3 py-1 text-xs",n),...c,children:i})}let i={primary:"bg-[var(--accent-primary)] text-[var(--accent-on-primary)] focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-[var(--surface-0)] hover:opacity-90",secondary:"bg-surface-soft text-[var(--text-primary)] border border-subtle focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-[var(--surface-0)] hover:bg-[var(--surface-0)]",ghost:"bg-transparent text-[var(--text-primary)] hover:bg-surface-soft focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-[var(--surface-0)]",outline:"border border-subtle text-[var(--text-primary)] hover:border-[var(--accent-primary)] hover:text-[var(--accent-primary)] focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-[var(--surface-0)]",subtle:"bg-[color-mix(in srgb, var(--accent-primary) 8%, transparent)] text-[var(--text-primary)] hover:bg-[color-mix(in srgb, var(--accent-primary) 12%, transparent)] focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-[var(--surface-0)]",danger:"bg-red-500 text-white hover:bg-red-600 focus-visible:ring-red-500 focus-visible:ring-offset-[var(--surface-0)]"},c={sm:"h-9 px-3 text-xs",md:"h-10 px-4",lg:"h-11 px-5 text-base",icon:"h-10 w-10 text-base"},o=(0,a.forwardRef)((e,t)=>{let{variant:r="primary",size:a="md",fullWidth:n=!1,className:o,type:d="button",...u}=e;return(0,s.jsx)("button",{ref:t,type:d,className:(0,l.cn)("inline-flex items-center justify-center gap-2 rounded-xl text-sm font-medium transition-base focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-60",i[r],c[a],n&&"w-full",o),...u})});o.displayName="Button";let d=(0,a.forwardRef)((e,t)=>{let{className:r,padded:a=!0,surface:n="default",as:i="section",...c}=e;return(0,s.jsx)(i,{ref:t,className:(0,l.cn)("rounded-2xl border border-subtle shadow-soft","soft"===n?"bg-surface-soft":"bg-[var(--surface-0)]",a&&"p-6",r),...c})});d.displayName="Card";let u=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("input",{ref:t,type:"checkbox",className:(0,l.cn)("h-4 w-4 rounded border-subtle text-[var(--accent-primary)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--surface-0)]",r),...a})});function x(e){let{title:t,description:r,action:a,icon:n,className:i,...c}=e;return(0,s.jsxs)(d,{as:"article",padded:!0,surface:"soft",className:(0,l.cn)("flex flex-col items-start gap-3 text-sm text-muted",i),...c,children:[n?(0,s.jsx)("div",{className:"text-2xl","aria-hidden":!0,children:n}):null,(0,s.jsx)("div",{className:"text-base font-semibold text-[var(--text-primary)]",children:t}),r?(0,s.jsx)("p",{children:r}):null,a?(0,s.jsx)("div",{className:"mt-2",children:a}):null]})}function m(e){let{label:t,description:r,error:n,inline:i=!1,required:c=!1,htmlFor:o,className:d,children:u,...x}=e,m=(0,a.useId)(),f=null!=o?o:m,p="".concat(f,"-label"),b=a.Children.map(u,e=>{if(!(0,a.isValidElement)(e))return e;let r={};e.props.id||(r.id=f);let s=e.props["aria-labelledby"];return r["aria-labelledby"]=s?"".concat(s," ").concat(p):p,"string"!=typeof t||e.props["aria-label"]||(r["aria-label"]=t),(0,a.cloneElement)(e,r)});return(0,s.jsxs)("div",{className:(0,l.cn)("flex flex-col gap-2 text-sm text-muted",i?"md:flex-row md:items-center md:gap-4":null,d),...x,children:[(0,s.jsxs)("label",{id:p,htmlFor:null!=o?o:f,className:"flex items-center gap-1 text-sm font-medium text-[var(--text-primary)]",children:[(0,s.jsx)("span",{children:t}),c?(0,s.jsx)("span",{className:"text-red-500","aria-hidden":"true",children:"*"}):null]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[b,r?(0,s.jsx)("p",{className:"text-xs text-muted",children:r}):null,n?(0,s.jsx)("p",{className:"text-xs text-red-600",children:n}):null]})]})}u.displayName="Checkbox";let f=(0,a.forwardRef)((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("input",{ref:t,className:(0,l.cn)("w-full rounded-xl border border-subtle bg-[var(--surface-0)] px-3 py-2 text-base text-[var(--text-primary)] transition-base placeholder:text-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)]",r),...a})});f.displayName="Input";let p=(0,a.forwardRef)((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsx)("select",{ref:t,className:(0,l.cn)("w-full rounded-xl border border-subtle bg-[var(--surface-0)] px-3 py-2 text-base text-[var(--text-primary)] transition-base focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)]",r),...n,children:a})});p.displayName="Select",r(6128);let b=(0,a.forwardRef)((e,t)=>{let{className:r,rows:a=3,...n}=e;return(0,s.jsx)("textarea",{ref:t,rows:a,className:(0,l.cn)("w-full rounded-xl border border-subtle bg-[var(--surface-0)] px-3 py-2 text-base text-[var(--text-primary)] transition-base placeholder:text-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)]",r),...n})});function v(e){let{justify:t="between",className:r,children:a,...n}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-wrap items-center gap-3 rounded-2xl border border-subtle bg-surface-soft px-4 py-3","start"===t?"justify-start":"end"===t?"justify-end":"justify-between",r),...n,children:a})}b.displayName="Textarea"},7967:(e,t,r)=>{Promise.resolve().then(r.bind(r,1799))},8185:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(5155);r(2115);var a=r(2235),l=r(526),n=r(6128);function i(e){let{title:t,subtitle:r,description:i,actions:c,contentClassName:o,children:d}=e;return(0,s.jsx)(a.default,{title:t,subtitle:r,actions:c,children:(0,s.jsxs)(n.w,{className:(0,l.cn)("p-6 md:p-8",o),spacing:"lg","aria-labelledby":"page-title","data-testid":"page-layout",children:[(0,s.jsxs)("header",{className:"flex flex-col gap-2",children:[(0,s.jsx)("h1",{id:"page-title",className:"text-xl font-semibold tracking-tight text-[var(--text-primary)]","data-testid":"page-title",children:t}),i?(0,s.jsx)("p",{className:"text-sm text-muted",children:i}):null]}),d]})})}}},e=>{e.O(0,[652,743,454,889,195,441,255,358],()=>e(e.s=7967)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9],{526:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var r=a(2821),s=a(5889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},2235:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var r=a(5155),s=a(2821),l=a(2619),n=a.n(l),i=a(63),c=a(2115),d=a(5704);let o=[{label:"Обзор",route:"/"},{label:"Входящие",route:"/inbox"},{label:"Области",route:"/areas",badge:"новый UI"},{label:"Проекты",route:"/projects",badge:"новый UI"},{label:"Команда",route:"/users",badge:"новый UI"},{label:"Ресурсы",route:"/resources",badge:"новый UI"},{label:"Задачи",route:"/tasks",badge:"новый UI"},{label:"Привычки",route:"/habits",badge:"новый UI"}];function u(e){let{title:t,subtitle:a,actions:l,children:u}=e,x=(0,i.usePathname)(),[m,f]=(0,c.useState)(!1),[p,b]=(0,c.useState)(!1),[h,v]=(0,c.useState)(!1),[g,y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{f(!1)},[x]),(0,c.useEffect)(()=>{if("function"!=typeof window.matchMedia)return;let e=window.matchMedia("(min-width: 768px)");v(e.matches);let t=e=>{v(e.matches),e.matches&&f(!1)};return"function"==typeof e.addEventListener?(e.addEventListener("change",t),()=>e.removeEventListener("change",t)):(e.addListener(t),()=>e.removeListener(t))},[]),(0,c.useEffect)(()=>{y(!0),"1"===window.localStorage.getItem("appShell.sidebarCollapsed")&&b(!0)},[]),(0,c.useEffect)(()=>{g&&window.localStorage.setItem("appShell.sidebarCollapsed",p?"1":"0")},[p,g]);let j=h?p?"Показать меню":"Скрыть меню":m?"Скрыть меню":"Показать меню",N=(0,c.useMemo)(()=>(function(){var e;let t=null!=(e=d.env.NEXT_PUBLIC_LEGACY_APP_BASE)?e:"";return o.map(e=>{var a,r;return"route"in e?{href:e.route,label:e.label,badge:e.badge}:t?{href:"".concat(t).concat(e.legacy),label:e.label,badge:null!=(a=e.badge)?a:"legacy",external:!0}:{href:"#",label:e.label,badge:null!=(r=e.badge)?r:"legacy",disabled:!0}})})().map(e=>{let t=!!x&&!e.external&&!e.disabled&&(x===e.href||x.startsWith("".concat(e.href,"/")));return{...e,active:t}}),[x]),w=(0,s.A)("fixed inset-y-0 left-0 z-50 w-72 transform border-r border-subtle bg-[var(--surface-0)] px-4 py-6 transition-transform duration-200 ease-out md:static md:px-5 md:py-8",m?"translate-x-0":"-translate-x-full md:translate-x-0",p?"md:-translate-x-full md:w-0 md:px-0 md:py-0 md:opacity-0 md:pointer-events-none":"md:w-64 md:translate-x-0");return(0,r.jsxs)("div",{className:"flex min-h-screen flex-col bg-surface","data-app-shell":!0,children:[(0,r.jsx)("header",{className:"sticky top-0 z-40 border-b border-subtle bg-[var(--surface-0)] backdrop-blur",children:(0,r.jsxs)("div",{className:"mx-auto flex w-full max-w-6xl items-center gap-4 px-4 py-4 md:px-6",children:[(0,r.jsxs)("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-surface-soft text-muted transition-base focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)] md:h-10 md:w-10","aria-label":j,"aria-pressed":h?!p:m,onClick:()=>{if(h)return void b(e=>!e);f(e=>!e)},children:[(0,r.jsx)("span",{className:"sr-only",children:"Меню"}),(0,r.jsx)("svg",{"aria-hidden":!0,className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:h?p?(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l6 7-6 7"}):(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 5l-6 7 6 7"}):m?(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6h18M3 12h18M3 18h18"})})]}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-1",children:[(0,r.jsx)("div",{className:"text-xs font-medium uppercase tracking-[0.16em] text-muted",children:"Intelligent Data Pro"}),(0,r.jsx)("div",{className:"text-lg font-semibold leading-tight md:text-xl",children:t}),a?(0,r.jsx)("div",{className:"text-sm text-muted",children:a}):null]}),l?(0,r.jsx)("div",{className:"flex items-center gap-2",children:l}):null]})}),(0,r.jsxs)("div",{className:"relative flex flex-1",children:[(0,r.jsx)("aside",{className:w,"aria-label":"Главное меню","aria-hidden":p&&!m,children:(0,r.jsx)("nav",{className:"flex flex-col gap-1",children:N.map(e=>{let t=e.label,a=e.disabled?"cursor-not-allowed text-muted opacity-70":e.active?"bg-[var(--accent-primary)] text-[var(--accent-on-primary)] shadow-soft":"text-muted hover:bg-surface-soft hover:text-[var(--text-primary)]",s="".concat("flex items-center justify-between rounded-lg px-4 py-2 text-sm font-medium transition-base"," ").concat(a," ").concat(e.disabled?"":"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--surface-0)]"),l=(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:e.label}),e.badge?(0,r.jsx)("span",{className:"rounded-full bg-[var(--accent-primary-soft)] px-2 py-0.5 text-[0.65rem] uppercase tracking-wide text-[var(--text-primary)]",children:e.badge}):null]});return e.disabled?(0,r.jsx)("span",{className:s,"aria-disabled":!0,children:l},t):e.external?(0,r.jsx)("a",{href:e.href,target:"_blank",rel:"noreferrer",className:s,children:l},t):(0,r.jsx)(n(),{href:e.href,className:s,"aria-current":e.active?"page":void 0,prefetch:!1,children:l},t)})})}),m?(0,r.jsx)("div",{className:"fixed inset-0 z-40 bg-black/40 backdrop-blur-sm md:hidden",role:"presentation",onClick:()=>f(!1)}):null,(0,r.jsx)("div",{className:"flex min-h-full flex-1 justify-center bg-surface",children:(0,r.jsx)("main",{className:"relative z-10 flex w-full max-w-6xl flex-col gap-6 px-4 py-6 md:px-8 md:py-10",children:(0,r.jsx)("div",{className:"rounded-2xl border border-subtle bg-[var(--surface-0)] p-0 shadow-soft",children:u})})})]})]})}},2756:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var r=a(5155),s=a(2115),l=a(2454),n=a(2619),i=a.n(n),c=a(5239),d=a(8185),o=a(7621),u=a(6816);function x(){var e;let[t,a]=(0,s.useState)(""),[n,x]=(0,s.useState)(""),m=(0,l.I)({queryKey:["users",n],staleTime:6e4,gcTime:3e5,retry:!1,queryFn:()=>{let e=new URLSearchParams;n.trim()&&e.set("search",n.trim());let t=e.toString();return(0,o.nr)("/api/v1/profiles/users".concat(t?"?".concat(t):""))}}),f=null!=(e=m.data)?e:[],p=m.isLoading,b=m.isFetching,h=f.length>0,v=m.error,g=!!v,y=g?v instanceof o.hD&&v.message&&!/body is unusable/i.test(v.message)?v.message:"Не удалось загрузить каталог":null;return(0,r.jsxs)(d.A,{title:"Команда",description:"Каталог пользователей Intelligent Data Pro",contentClassName:"flex flex-col gap-6 p-6 md:p-8",children:[(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),x(t)},className:"flex flex-col gap-4",children:(0,r.jsxs)(u.M7,{justify:"between",children:[(0,r.jsxs)("label",{htmlFor:"users-search",className:"flex flex-1 items-center gap-2",children:[(0,r.jsx)("span",{className:"text-muted","aria-hidden":!0,children:(0,r.jsx)("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.6,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5a6 6 0 015.2 8.94l3.43 3.43a1 1 0 01-1.42 1.42l-3.43-3.43A6 6 0 1111 5z"})})}),(0,r.jsx)(u.pd,{id:"users-search",type:"search",value:t,onChange:e=>a(e.target.value),placeholder:"Поиск по имени или описанию",className:"bg-transparent"})]}),(0,r.jsx)(u.$n,{type:"submit",variant:"primary",size:"md",children:"Найти"})]})}),g?(0,r.jsxs)(u.Zp,{className:"border-red-200/80 bg-red-50 text-sm text-red-700",role:"alert",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("strong",{className:"text-red-700",children:y}),(0,r.jsx)("span",{className:"text-xs text-muted",children:"Попробуйте обновить страницу или проверьте подключение к сети."})]}),(0,r.jsx)(u.$n,{type:"button",variant:"outline",size:"sm",className:"self-start",onClick:()=>m.refetch(),children:"Повторить"})]}):null,p?(0,r.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:Array.from({length:6}).map((e,t)=>(0,r.jsx)(u.Zp,{className:"animate-pulse bg-surface-soft",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-12 w-12 rounded-xl bg-surface"}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsx)("div",{className:"h-3 w-32 rounded-full bg-surface"}),(0,r.jsx)("div",{className:"h-3 w-40 rounded-full bg-surface"})]})]})},t))}):p||b||h||g?(0,r.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 xl:grid-cols-3",children:f.map(e=>(0,r.jsx)(i(),{href:"/users/".concat(e.slug),prefetch:!1,className:"group",children:(0,r.jsxs)(u.Zp,{as:"article",className:"flex h-full flex-col gap-3 transition-base hover:-translate-y-1 hover:border-[var(--accent-primary)]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"flex h-12 w-12 items-center justify-center overflow-hidden rounded-xl bg-surface-soft",children:e.avatar_url?(0,r.jsx)(c.default,{src:e.avatar_url,alt:"Аватар пользователя",width:48,height:48,className:"h-full w-full object-cover",unoptimized:!0}):(0,r.jsx)("span",{"aria-hidden":!0,className:"text-lg",children:"\uD83D\uDC64"})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-[var(--text-primary)]",children:e.display_name}),e.headline?(0,r.jsx)("span",{className:"text-xs text-muted",children:e.headline}):null]})]}),e.summary?(0,r.jsx)("p",{className:"line-clamp-3 text-sm text-muted",children:e.summary}):null,(0,r.jsx)("span",{className:"text-xs font-medium uppercase tracking-wide text-[var(--accent-primary)]",children:"Открыть профиль →"})]})},e.slug))}):(0,r.jsx)(u.pp,{title:n?"Совпадений не найдено":"Команда пока пустая",description:n?"Попробуйте изменить поисковый запрос или проверьте правописание.":"Пригласите коллег, и их профили появятся в каталоге."})]})}},3415:(e,t,a)=>{Promise.resolve().then(a.bind(a,2756))},6128:(e,t,a)=>{"use strict";a.d(t,{w:()=>n});var r=a(5155);a(2115);var s=a(526);let l={none:"gap-0",sm:"gap-3",md:"gap-4",lg:"gap-6"};function n(e){let{spacing:t="md",className:a,children:n,...i}=e;return(0,r.jsx)("section",{className:(0,s.cn)("flex flex-col",l[t],a),...i,children:n})}},6816:(e,t,a)=>{"use strict";a.d(t,{Ex:()=>n,$n:()=>d,Zp:()=>o,Sc:()=>u,pp:()=>x,D0:()=>m,pd:()=>f,l6:()=>p,TM:()=>b,M7:()=>h});var r=a(5155),s=a(2115),l=a(526);function n(e){let{tone:t="accent",size:a="md",uppercase:s=!0,className:n,children:i,...c}=e;return(0,r.jsx)("span",{className:(0,l.cn)("inline-flex items-center rounded-full font-medium tracking-wide",s&&"uppercase","accent"===t?"bg-[var(--accent-primary-soft)] text-[var(--text-primary)]":"success"===t?"bg-emerald-100 text-emerald-700":"warning"===t?"bg-amber-100 text-amber-700":"bg-surface-soft text-muted","sm"===a?"px-2 py-0.5 text-[0.65rem]":"px-3 py-1 text-xs",n),...c,children:i})}let i={primary:"bg-[var(--accent-primary)] text-[var(--accent-on-primary)] focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-[var(--surface-0)] hover:opacity-90",secondary:"bg-surface-soft text-[var(--text-primary)] border border-subtle focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-[var(--surface-0)] hover:bg-[var(--surface-0)]",ghost:"bg-transparent text-[var(--text-primary)] hover:bg-surface-soft focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-[var(--surface-0)]",outline:"border border-subtle text-[var(--text-primary)] hover:border-[var(--accent-primary)] hover:text-[var(--accent-primary)] focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-[var(--surface-0)]",subtle:"bg-[color-mix(in srgb, var(--accent-primary) 8%, transparent)] text-[var(--text-primary)] hover:bg-[color-mix(in srgb, var(--accent-primary) 12%, transparent)] focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-[var(--surface-0)]",danger:"bg-red-500 text-white hover:bg-red-600 focus-visible:ring-red-500 focus-visible:ring-offset-[var(--surface-0)]"},c={sm:"h-9 px-3 text-xs",md:"h-10 px-4",lg:"h-11 px-5 text-base",icon:"h-10 w-10 text-base"},d=(0,s.forwardRef)((e,t)=>{let{variant:a="primary",size:s="md",fullWidth:n=!1,className:d,type:o="button",...u}=e;return(0,r.jsx)("button",{ref:t,type:o,className:(0,l.cn)("inline-flex items-center justify-center gap-2 rounded-xl text-sm font-medium transition-base focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-60",i[a],c[s],n&&"w-full",d),...u})});d.displayName="Button";let o=(0,s.forwardRef)((e,t)=>{let{className:a,padded:s=!0,surface:n="default",as:i="section",...c}=e;return(0,r.jsx)(i,{ref:t,className:(0,l.cn)("rounded-2xl border border-subtle shadow-soft","soft"===n?"bg-surface-soft":"bg-[var(--surface-0)]",s&&"p-6",a),...c})});o.displayName="Card";let u=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("input",{ref:t,type:"checkbox",className:(0,l.cn)("h-4 w-4 rounded border-subtle text-[var(--accent-primary)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--surface-0)]",a),...s})});function x(e){let{title:t,description:a,action:s,icon:n,className:i,...c}=e;return(0,r.jsxs)(o,{as:"article",padded:!0,surface:"soft",className:(0,l.cn)("flex flex-col items-start gap-3 text-sm text-muted",i),...c,children:[n?(0,r.jsx)("div",{className:"text-2xl","aria-hidden":!0,children:n}):null,(0,r.jsx)("div",{className:"text-base font-semibold text-[var(--text-primary)]",children:t}),a?(0,r.jsx)("p",{children:a}):null,s?(0,r.jsx)("div",{className:"mt-2",children:s}):null]})}function m(e){let{label:t,description:a,error:n,inline:i=!1,required:c=!1,htmlFor:d,className:o,children:u,...x}=e,m=(0,s.useId)(),f=null!=d?d:m,p="".concat(f,"-label"),b=s.Children.map(u,e=>{if(!(0,s.isValidElement)(e))return e;let a={};e.props.id||(a.id=f);let r=e.props["aria-labelledby"];return a["aria-labelledby"]=r?"".concat(r," ").concat(p):p,"string"!=typeof t||e.props["aria-label"]||(a["aria-label"]=t),(0,s.cloneElement)(e,a)});return(0,r.jsxs)("div",{className:(0,l.cn)("flex flex-col gap-2 text-sm text-muted",i?"md:flex-row md:items-center md:gap-4":null,o),...x,children:[(0,r.jsxs)("label",{id:p,htmlFor:null!=d?d:f,className:"flex items-center gap-1 text-sm font-medium text-[var(--text-primary)]",children:[(0,r.jsx)("span",{children:t}),c?(0,r.jsx)("span",{className:"text-red-500","aria-hidden":"true",children:"*"}):null]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[b,a?(0,r.jsx)("p",{className:"text-xs text-muted",children:a}):null,n?(0,r.jsx)("p",{className:"text-xs text-red-600",children:n}):null]})]})}u.displayName="Checkbox";let f=(0,s.forwardRef)((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("input",{ref:t,className:(0,l.cn)("w-full rounded-xl border border-subtle bg-[var(--surface-0)] px-3 py-2 text-base text-[var(--text-primary)] transition-base placeholder:text-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)]",a),...s})});f.displayName="Input";let p=(0,s.forwardRef)((e,t)=>{let{className:a,children:s,...n}=e;return(0,r.jsx)("select",{ref:t,className:(0,l.cn)("w-full rounded-xl border border-subtle bg-[var(--surface-0)] px-3 py-2 text-base text-[var(--text-primary)] transition-base focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)]",a),...n,children:s})});p.displayName="Select",a(6128);let b=(0,s.forwardRef)((e,t)=>{let{className:a,rows:s=3,...n}=e;return(0,r.jsx)("textarea",{ref:t,rows:s,className:(0,l.cn)("w-full rounded-xl border border-subtle bg-[var(--surface-0)] px-3 py-2 text-base text-[var(--text-primary)] transition-base placeholder:text-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)]",a),...n})});function h(e){let{justify:t="between",className:a,children:s,...n}=e;return(0,r.jsx)("div",{className:(0,l.cn)("flex flex-wrap items-center gap-3 rounded-2xl border border-subtle bg-surface-soft px-4 py-3","start"===t?"justify-start":"end"===t?"justify-end":"justify-between",a),...n,children:s})}b.displayName="Textarea"},7621:(e,t,a)=>{"use strict";a.d(t,{Zq:()=>n,hD:()=>s,nr:()=>l});var r=a(5704);class s extends Error{constructor(e,t,a){super(e),this.name="ApiError",this.status=t,this.info=a}}async function l(e){var t,a;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{skipAuth:n,headers:i,...c}=l,d=e.startsWith("http")?e:"".concat((null!=(a=null!=(t=r.env.NEXT_PUBLIC_API_BASE)?t:r.env.API_URL)?a:"").replace(/\/$/,"")).concat(e),o=await fetch(d,{credentials:n?"same-origin":"include",headers:{"Content-Type":"application/json",...null!=i?i:{}},...c});if(!o.ok){let e;try{e=await o.json()}catch(t){e=await o.text()}throw new s("string"==typeof e&&e.trim().length>0?e:"Ошибка запроса",o.status,e)}return 204===o.status?void 0:(o.headers.get("content-type")||"").includes("application/json")?await o.json():await o.text()}function n(e){let t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&""!==r&&t.set(a,String(r))});let a=t.toString();return a?"?".concat(a):""}},8185:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(5155);a(2115);var s=a(2235),l=a(526),n=a(6128);function i(e){let{title:t,subtitle:a,description:i,actions:c,contentClassName:d,children:o}=e;return(0,r.jsx)(s.default,{title:t,subtitle:a,actions:c,children:(0,r.jsxs)(n.w,{className:(0,l.cn)("p-6 md:p-8",d),spacing:"lg","aria-labelledby":"page-title","data-testid":"page-layout",children:[(0,r.jsxs)("header",{className:"flex flex-col gap-2",children:[(0,r.jsx)("h1",{id:"page-title",className:"text-xl font-semibold tracking-tight text-[var(--text-primary)]","data-testid":"page-title",children:t}),i?(0,r.jsx)("p",{className:"text-sm text-muted",children:i}):null]}),o]})})}}},e=>{e.O(0,[652,743,454,889,239,441,255,358],()=>e(e.s=3415)),_N_E=e.O()}]);
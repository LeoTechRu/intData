<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚Äî LeonidPro</title>
  <link rel="stylesheet" href="{{ url_for('static', path='css/style.css') }}">
  <script type="module" src="{{ url_for('static', path='js/main.js') }}"></script>
  <script src="{{ url_for('static', path='js/auth_extra.js') }}"></script>
  {% if RECAPTCHA_SITE_KEY %}
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  {% endif %}
  {% if EXTRA_HEAD %}{{ EXTRA_HEAD|safe }}{% endif %}
  {% if head_scripts %}{{ head_scripts|safe }}{% endif %}
</head>
<body class="auth-page">
  {% include "_icons.html" %}

  <header class="auth-header">
    <a class="brand" href="{{ WEB_PUBLIC_URL or '/' }}">LeonidPro</a>
  </header>

  <main class="auth-hero">
    <div class="auth-card">
      {% if config_warnings and config_warnings|length %}
      <div class="auth-alert" role="status">
        <div><strong>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:</strong></div>
        <ul style="margin:6px 0 0 18px;">
          {% for w in config_warnings %}
            <li><code>{{ w.code }}</code> ‚Äî {{ w.message }}</li>
          {% endfor %}
        </ul>
        <div class="muted small" style="margin-top:6px">–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.</div>
      </div>
      {% endif %}

      <nav class="auth-tabs" role="tablist">
        <a href="#login"     class="tab {% if active_tab=='login' %}is-active{% endif %}" data-tab="login"     role="tab" aria-selected="{{ 'true' if active_tab=='login' else 'false' }}">–í—Ö–æ–¥</a>
        <a href="#register"  class="tab {% if active_tab=='register' %}is-active{% endif %}" data-tab="register"  role="tab" aria-selected="{{ 'true' if active_tab=='register' else 'false' }}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        <a href="#restore"   class="tab {% if active_tab=='restore' %}is-active{% endif %}" data-tab="restore"   role="tab" aria-selected="{{ 'true' if active_tab=='restore' else 'false' }}">–ù–∞–ø–æ–º–Ω–∏—Ç—å</a>
      </nav>

      <section class="auth-forms">
        {% if form_errors_json %}
          <script>window.AUTH_ERRORS={{ form_errors_json|safe }};</script>
        {% endif %}

        <!-- LOGIN -->
        <form action="/login" method="post" class="auth-form form-login{% if active_tab!='login' %} is-hidden{% endif %}" data-validate="login" novalidate>
          {{ csrf_input|safe if csrf_input is defined }}
          <label class="field">
            <span class="label">Username</span>
            <input class="control" type="text" name="username" autocomplete="username" required placeholder="–í–∞—à –ª–æ–≥–∏–Ω" value="{{ form_values.username or '' }}">
            <div class="error-text" data-for="username"></div>
          </label>

          <label class="field">
            <span class="label">–ü–∞—Ä–æ–ª—å</span>
            <div class="control-with-action">
              <input class="control" type="password" name="password" autocomplete="current-password" required placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
              <button type="button" class="link tiny toggle-password" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">üëÅ</button>
            </div>
            <div class="error-text" data-for="password"></div>
          </label>

          <label class="checkbox">
            <input type="checkbox" name="remember_me" value="1">
            <span>–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</span>
            <a class="link small right" href="#restore" data-tab-jump="restore">–Ω–∞–ø–æ–º–Ω–∏—Ç—å</a>
          </label>

          {% if RECAPTCHA_SITE_KEY %}
          <div class="g-recaptcha" data-sitekey="{{ RECAPTCHA_SITE_KEY }}"></div>
          {% endif %}

          <button class="btn primary full" type="submit">–í–æ–π—Ç–∏</button>

          <div class="or">–∏–ª–∏</div>

          {% if TG_LOGIN_ENABLED %}
            <div class="tg-login">
              <script async src="https://telegram.org/js/telegram-widget.js?22"
                      data-telegram-login="{{ TG_BOT_USERNAME or 'LeonidBot' }}"
                      data-size="large"
                      data-userpic="false"
                      data-request-access="write"
                      data-auth-url="/auth/telegram"
                      data-lang="ru"></script>
              <a class="btn telegram full" target="_blank" rel="noopener"
                 href="https://t.me/{{ (TG_BOT_USERNAME or '@LeonidBot')|replace('@','') }}?start=login">
                <svg class="icon"><use href="#i-paper-plane" /></svg>
                –û—Ç–∫—Ä—ã—Ç—å {{ TG_BOT_USERNAME or '@LeonidBot' }}
              </a>
              <div class="muted small">–ï—Å–ª–∏ –≤–∏–¥–∂–µ—Ç –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è, –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤—ã—à–µ.</div>
            </div>
          {% endif %}

          {% if flash %}
            <div class="auth-alert">{{ flash }}</div>
          {% endif %}
        </form>

        <!-- REGISTER -->
        <form action="/register" method="post" class="auth-form form-register{% if active_tab!='register' %} is-hidden{% endif %}" data-validate="register" novalidate>
          {{ csrf_input|safe if csrf_input is defined }}

          <label class="field">
            <span class="label">Username</span>
            <input class="control" type="text" name="username" autocomplete="username" required placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω" value="{{ form_values.username or '' }}">
            <div class="error-text" data-for="username"></div>
          </label>

          <label class="field">
            <span class="label">Email</span>
            <input class="control" type="email" name="email" autocomplete="email" required placeholder="–í–≤–µ–¥–∏—Ç–µ Email" value="{{ form_values.email or '' }}">
            <div class="error-text" data-for="email"></div>
          </label>

          <label class="field">
            <span class="label">–ü–∞—Ä–æ–ª—å</span>
            <div class="control-with-action">
              <input class="control" type="password" name="password" autocomplete="new-password" required placeholder="–°–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å">
              <button type="button" class="link tiny toggle-password" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">üëÅ</button>
            </div>
            <div class="error-text" data-for="password"></div>
            <div class="pwd-meter" aria-hidden="true"><i></i></div>
            <div class="pwd-hint">–ú–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤. –õ—É—á—à–µ: –±—É–∫–≤—ã –≤ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ö, —Ü–∏—Ñ—Ä—ã –∏ —Å–∏–º–≤–æ–ª—ã.</div>
          </label>

          <label class="field">
            <span class="label">–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å</span>
            <input class="control" type="password" name="password2" autocomplete="new-password" required placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
            <div class="error-text" data-for="password2"></div>
          </label>

          {% if RECAPTCHA_SITE_KEY %}
          <div class="g-recaptcha" data-sitekey="{{ RECAPTCHA_SITE_KEY }}"></div>
          {% endif %}

          <button class="btn primary full" type="submit">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        </form>

        <!-- RESTORE -->
        <form action="/restore" method="post" class="auth-form form-restore{% if active_tab!='restore' %} is-hidden{% endif %}" data-validate="restore" novalidate>
          {{ csrf_input|safe if csrf_input is defined }}
          <input type="hidden" name="form_ts" value="{{ now_ts }}">
          <div class="hp-wrap" aria-hidden="true"><input type="text" name="hp_url" tabindex="-1" autocomplete="off"></div>

          <label class="field">
            <span class="label">Email</span>
            <input class="control" type="email" name="email" required placeholder="–í–≤–µ–¥–∏—Ç–µ Email" value="{{ form_values.email or '' }}">
            <div class="error-text" data-for="email"></div>
          </label>

          <button class="btn primary full" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
          <div class="or">–∏–ª–∏</div>
          <button class="btn full" type="submit" formaction="/auth/magic/request">–í–æ–π—Ç–∏ –ø–æ –º–∞–≥–∏—á–µ—Å–∫–æ–π —Å—Å—ã–ª–∫–µ</button>
          <p class="muted small" style="margin-top:10px">–ú—ã –ø—Ä–∏—à–ª—ë–º –ø–∏—Å—å–º–æ —Å–æ —Å—Å—ã–ª–∫–æ–π –¥–ª—è —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è (–µ—Å–ª–∏ —Ç–∞–∫–æ–π –∞–∫–∫–∞—É–Ω—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç).</p>
        </form>

      </section>
    </div>
  </main>
</body>
</html>

<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚Äî {{ BRAND_NAME }}</title>
  <link rel="stylesheet" href="{{ url_for('static', path='css/style.css') }}">
  <script type="module" src="{{ url_for('static', path='js/main.js') }}"></script>
  <script src="{{ url_for('static', path='js/auth_extra.js') }}"></script>
  {% if RECAPTCHA_SITE_KEY %}
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
  {% endif %}
  {% if EXTRA_HEAD %}{{ EXTRA_HEAD|safe }}{% endif %}
  {% if head_scripts %}{{ head_scripts|safe }}{% endif %}
</head>
<body class="auth-page">
  {% include "_icons.html" %}

  <main class="auth-hero">
    <div class="auth-brand">
      <div class="brand-name">{{ BRAND_NAME }}</div>
      <div class="brand-tagline">–í–∞—à —Ü–∏—Ñ—Ä–æ–≤–æ–π –≤—Ç–æ—Ä–æ–π –º–æ–∑–≥ –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –º—ã—à–ª–µ–Ω–∏—è –∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã</div>
    </div>
    <div class="auth-card">
      {% if config_warnings and config_warnings|length %}
      <div class="auth-alert" role="status">
        <div><strong>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:</strong></div>
        <ul style="margin:6px 0 0 18px;">
          {% for w in config_warnings %}
            <li><code>{{ w.code }}</code> ‚Äî {{ w.message }}</li>
          {% endfor %}
        </ul>
        <div class="muted small" style="margin-top:6px">–°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.</div>
      </div>
      {% endif %}

      {% if TG_LOGIN_ENABLED and tg_bot_username %}
        <div class="tg-btn-wrapper">
          <script async src="https://telegram.org/js/telegram-widget.js?22"
                  data-telegram-login="{{ tg_bot_username }}"
                  data-size="large"
                  data-userpic="false"
                  data-request-access="write"
                  data-auth-url="/auth/tg/callback"></script>
        </div>
      {% endif %}

      <section class="auth-forms">
        {% if form_errors_json %}
          <script>window.AUTH_ERRORS={{ form_errors_json|safe }};</script>
        {% endif %}

        <!-- LOGIN -->
        <form action="/auth/login" method="post" class="auth-form form-login" data-validate="login" novalidate>
          {{ csrf_input|safe if csrf_input is defined }}
          <label class="field">
            <input class="control" type="text" name="username" autocomplete="username" required placeholder="–í–∞—à –ª–æ–≥–∏–Ω" value="{{ form_values.username or '' }}">
            <div class="error-text" data-for="username"></div>
          </label>

          <label class="field">
            <div class="control-with-action">
              <input class="control" type="password" name="password" autocomplete="current-password" required placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
              <button type="button" class="link tiny toggle-password" aria-label="–ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å">üëÅ</button>
            </div>
            <div class="error-text" data-for="password"></div>
          </label>

          <div class="login-extra">
            <label class="checkbox">
              <input type="checkbox" name="remember_me" value="1">
              <span>–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è</span>
            </label>
            <button class="link small remind-btn" type="button">–ù–∞–ø–æ–º–Ω–∏—Ç—å</button>
          </div>

          {% if RECAPTCHA_SITE_KEY %}
          <div class="g-recaptcha" data-sitekey="{{ RECAPTCHA_SITE_KEY }}"></div>
          {% endif %}

          <button class="btn primary full" type="submit">–í—Ö–æ–¥</button>

          {% if flash %}
            <div class="auth-alert">{{ flash }}</div>
          {% endif %}
        </form>

      </section>
    </div>
  </main>
</body>
</html>

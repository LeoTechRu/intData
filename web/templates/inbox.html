{% extends "base.html" %}
{% block title %}Inbox{% endblock %}
{% block content %}
<div class="ui-layout">
  <div id="main-content">
    <section class="card">
      <div class="card-title">Входящие заметки</div>
      <table class="ui-table">
        <thead><tr><th>ID</th><th>Заголовок</th><th>Текст</th></tr></thead>
        <tbody id="inbox-list"></tbody>
      </table>
      <div id="inbox-empty" class="text-muted" style="display:none; padding:8px;">Пусто</div>
    </section>
  </div>
</div>
<script>
async function fetchInbox(){
  const r = await fetch('/api/v1/inbox/notes', {credentials:'include'});
  if (!r.ok){ document.getElementById('inbox-empty').style.display = 'block'; return; }
  const data = await r.json();
  const list = document.getElementById('inbox-list');
  list.innerHTML = '';
  if (!data.length){ document.getElementById('inbox-empty').style.display='block'; return; }
  document.getElementById('inbox-empty').style.display='none';
  for (const n of data){
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${n.id}</td><td>${n.title||''}</td><td>${n.content}</td>`;
    list.appendChild(tr);
  }
}
document.addEventListener('DOMContentLoaded', fetchInbox);
</script>
{% endblock %}


{% extends "base.html" %}
{% block title %}Профиль{% endblock %}
{% block content %}
<div class="ui-layout">
  <div id="main-content">
    {% if editing %}
    <div class="card">
      <div class="card-body">
        <form class="ui-form" method="post" action="/profile/{{ profile_user.username }}" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); gap:1rem;">
          <div>
            <label>Полное имя</label>
            <input type="text" name="full_name" value="{{ profile_user.full_name or '' }}">
          </div>
          <div>
            <label>Email</label>
            <input type="email" name="email" value="{{ profile_user.email or '' }}">
          </div>
          <div>
            <label>Телефон</label>
            <input type="text" name="phone" value="{{ profile_user.phone or '' }}">
          </div>
          <div>
            <label>День рождения</label>
            <input type="date" name="birthday" value="{{ profile_user.birthday.strftime('%Y-%m-%d') if profile_user.birthday else '' }}">
          </div>
          <div>
            <label>Язык</label>
            <input type="text" name="language" value="{{ profile_user.language or '' }}">
          </div>
          <div style="grid-column:1 / -1; display:flex; justify-content:flex-end; gap:1rem;">
            <button type="submit" class="button">Сохранить</button>
            <button type="button" class="button" onclick="location.href='/profile/{{ profile_user.username }}'">Отмена</button>
          </div>
        </form>
      </div>
    </div>
    {% else %}
    <div class="card">
      <div class="card-body">
        <div class="grid grid-2 gap-md">
          <div><div class="text-muted">Full name</div><div>{{ profile_user.full_name or '—' }}</div></div>
          <div><div class="text-muted">Username</div><div>{{ profile_user.username }}</div></div>
          <div><div class="text-muted">Email</div><div>{{ profile_user.email or 'не указано' }}</div></div>
          <div><div class="text-muted">Телефон</div><div>{{ profile_user.phone or 'не указан' }}</div></div>
          <div><div class="text-muted">День рождения</div><div>{{ profile_user.birthday.strftime('%d.%m.%Y') if profile_user.birthday else 'не указано' }}</div></div>
          <div><div class="text-muted">Язык</div><div>{{ profile_user.language or 'не указан' }}</div></div>
          <div>
            <div class="text-muted">Роль</div>
            <div>
              <button type="button" class="role-badge" data-role="{{ profile_user.role }}">{{ profile_user.role }}</button>
            </div>
          </div>
        </div>
        <div style="display:flex; justify-content:flex-end; margin-top:1rem;">
          <button class="button" onclick="location.href='/profile/{{ profile_user.username }}?edit=true'">Редактировать профиль</button>
        </div>
      </div>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}

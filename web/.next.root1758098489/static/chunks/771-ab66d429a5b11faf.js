(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[771],{526:(e,a,t)=>{"use strict";t.d(a,{cn:()=>r});var l=t(2821),s=t(5889);function r(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,s.QP)((0,l.$)(a))}},2235:(e,a,t)=>{"use strict";t.d(a,{default:()=>u});var l=t(5155),s=t(2821),r=t(2619),n=t.n(r),i=t(63),d=t(2115),c=t(5704);let o=[{label:"Обзор",route:"/"},{label:"Входящие",route:"/inbox"},{label:"Области",route:"/areas",badge:"новый UI"},{label:"Проекты",route:"/projects",badge:"новый UI"},{label:"Команда",route:"/users",badge:"новый UI"},{label:"Ресурсы",route:"/resources",badge:"новый UI"},{label:"Задачи",route:"/tasks",badge:"новый UI"},{label:"Привычки",route:"/habits",badge:"новый UI"}];function u(e){let{title:a,subtitle:t,actions:r,children:u}=e,m=(0,i.usePathname)(),[x,f]=(0,d.useState)(!1),[h,p]=(0,d.useState)(!1),[b,g]=(0,d.useState)(!1),[v,j]=(0,d.useState)(!1);(0,d.useEffect)(()=>{f(!1)},[m]),(0,d.useEffect)(()=>{if("function"!=typeof window.matchMedia)return;let e=window.matchMedia("(min-width: 768px)");g(e.matches);let a=e=>{g(e.matches),e.matches&&f(!1)};return"function"==typeof e.addEventListener?(e.addEventListener("change",a),()=>e.removeEventListener("change",a)):(e.addListener(a),()=>e.removeListener(a))},[]),(0,d.useEffect)(()=>{j(!0),"1"===window.localStorage.getItem("appShell.sidebarCollapsed")&&p(!0)},[]),(0,d.useEffect)(()=>{v&&window.localStorage.setItem("appShell.sidebarCollapsed",h?"1":"0")},[h,v]);let N=b?h?"Показать меню":"Скрыть меню":x?"Скрыть меню":"Показать меню",y=(0,d.useMemo)(()=>(function(){var e;let a=null!=(e=c.env.NEXT_PUBLIC_LEGACY_APP_BASE)?e:"";return o.map(e=>{var t,l;return"route"in e?{href:e.route,label:e.label,badge:e.badge}:a?{href:"".concat(a).concat(e.legacy),label:e.label,badge:null!=(t=e.badge)?t:"legacy",external:!0}:{href:"#",label:e.label,badge:null!=(l=e.badge)?l:"legacy",disabled:!0}})})().map(e=>{let a=!!m&&!e.external&&!e.disabled&&(m===e.href||m.startsWith("".concat(e.href,"/")));return{...e,active:a}}),[m]),w=(0,s.A)("fixed inset-y-0 left-0 z-50 w-72 transform border-r border-subtle bg-[var(--surface-0)] px-4 py-6 transition-transform duration-200 ease-out md:static md:px-5 md:py-8",x?"translate-x-0":"-translate-x-full md:translate-x-0",h?"md:-translate-x-full md:w-0 md:px-0 md:py-0 md:opacity-0 md:pointer-events-none":"md:w-64 md:translate-x-0");return(0,l.jsxs)("div",{className:"flex min-h-screen flex-col bg-surface","data-app-shell":!0,children:[(0,l.jsx)("header",{className:"sticky top-0 z-40 border-b border-subtle bg-[var(--surface-0)] backdrop-blur",children:(0,l.jsxs)("div",{className:"mx-auto flex w-full max-w-6xl items-center gap-4 px-4 py-4 md:px-6",children:[(0,l.jsxs)("button",{type:"button",className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-surface-soft text-muted transition-base focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)] md:h-10 md:w-10","aria-label":N,"aria-pressed":b?!h:x,onClick:()=>{if(b)return void p(e=>!e);f(e=>!e)},children:[(0,l.jsx)("span",{className:"sr-only",children:"Меню"}),(0,l.jsx)("svg",{"aria-hidden":!0,className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:b?h?(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l6 7-6 7"}):(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 5l-6 7 6 7"}):x?(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 6h18M3 12h18M3 18h18"})})]}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col gap-1",children:[(0,l.jsx)("div",{className:"text-xs font-medium uppercase tracking-[0.16em] text-muted",children:"Intelligent Data Pro"}),(0,l.jsx)("div",{className:"text-lg font-semibold leading-tight md:text-xl",children:a}),t?(0,l.jsx)("div",{className:"text-sm text-muted",children:t}):null]}),r?(0,l.jsx)("div",{className:"flex items-center gap-2",children:r}):null]})}),(0,l.jsxs)("div",{className:"relative flex flex-1",children:[(0,l.jsx)("aside",{className:w,"aria-label":"Главное меню","aria-hidden":h&&!x,children:(0,l.jsx)("nav",{className:"flex flex-col gap-1",children:y.map(e=>{let a=e.label,t=e.disabled?"cursor-not-allowed text-muted opacity-70":e.active?"bg-[var(--accent-primary)] text-[var(--accent-on-primary)] shadow-soft":"text-muted hover:bg-surface-soft hover:text-[var(--text-primary)]",s="".concat("flex items-center justify-between rounded-lg px-4 py-2 text-sm font-medium transition-base"," ").concat(t," ").concat(e.disabled?"":"focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--surface-0)]"),r=(0,l.jsxs)("span",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{children:e.label}),e.badge?(0,l.jsx)("span",{className:"rounded-full bg-[var(--accent-primary-soft)] px-2 py-0.5 text-[0.65rem] uppercase tracking-wide text-[var(--text-primary)]",children:e.badge}):null]});return e.disabled?(0,l.jsx)("span",{className:s,"aria-disabled":!0,children:r},a):e.external?(0,l.jsx)("a",{href:e.href,target:"_blank",rel:"noreferrer",className:s,children:r},a):(0,l.jsx)(n(),{href:e.href,className:s,"aria-current":e.active?"page":void 0,prefetch:!1,children:r},a)})})}),x?(0,l.jsx)("div",{className:"fixed inset-0 z-40 bg-black/40 backdrop-blur-sm md:hidden",role:"presentation",onClick:()=>f(!1)}):null,(0,l.jsx)("div",{className:"flex min-h-full flex-1 justify-center bg-surface",children:(0,l.jsx)("main",{className:"relative z-10 flex w-full max-w-6xl flex-col gap-6 px-4 py-6 md:px-8 md:py-10",children:(0,l.jsx)("div",{className:"rounded-2xl border border-subtle bg-[var(--surface-0)] p-0 shadow-soft",children:u})})})]})]})}},4548:(e,a,t)=>{"use strict";t.d(a,{default:()=>u});var l=t(5155),s=t(2115),r=t(5239),n=t(2619),i=t.n(n),d=t(2454),c=t(8185),o=t(7621);function u(e){var a,t,n,u,m,x,f,h,p,b,g,v;let{entity:j,slug:N,backHref:y,backLabel:w}=e,k=(0,d.I)({queryKey:["profile",j,N],staleTime:6e4,gcTime:3e5,retry:!1,queryFn:()=>(0,o.nr)("/api/v1/profiles/".concat(j,"/").concat(N))}),L=(0,s.useMemo)(()=>{var e,a;return Object.entries(null!=(a=null==(e=k.data)?void 0:e.profile_meta)?a:{}).map(e=>{let[a,t]=e;return{key:a,value:null==t?"—":String(t)}})},[k.data]),_=null!=(p=null==(a=k.data)?void 0:a.sections)?p:[],E=null!=(b=null==(t=k.data)?void 0:t.tags)?b:[],C=k.isLoading,I=k.error,A=I?I instanceof o.hD?I.message:"Не удалось загрузить профиль":null,S=null!=(g=null==(n=k.data)?void 0:n.display_name)?g:N;return(0,l.jsx)(c.A,{title:S,description:null!=(v=null==(u=k.data)?void 0:u.headline)?v:void 0,contentClassName:"flex flex-col gap-6 p-0",children:(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsxs)("header",{className:"relative isolate overflow-hidden rounded-3xl border border-subtle bg-[var(--surface-0)]",children:[(null==(m=k.data)?void 0:m.cover_url)?(0,l.jsx)("div",{className:"h-48 w-full bg-cover bg-center md:h-56",style:{backgroundImage:"linear-gradient(135deg, rgba(15,23,42,0.35), rgba(30,41,59,0.25)), url('".concat(k.data.cover_url,"')")},"aria-hidden":!0}):null,(0,l.jsxs)("div",{className:"flex flex-col gap-4 px-6 py-6 md:flex-row md:items-center md:gap-6",children:[(0,l.jsx)("div",{className:"-mt-12 h-20 w-20 overflow-hidden rounded-2xl border-4 border-[var(--surface-0)] bg-surface-soft md:-mt-16 md:h-28 md:w-28",children:(null==(x=k.data)?void 0:x.avatar_url)?(0,l.jsx)(r.default,{src:k.data.avatar_url,alt:"Аватар",width:112,height:112,className:"h-full w-full object-cover",unoptimized:!0}):(0,l.jsx)("div",{className:"flex h-full w-full items-center justify-center text-3xl","aria-hidden":!0,children:"\uD83D\uDCCC"})}),(0,l.jsxs)("div",{className:"flex flex-1 flex-col gap-1",children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold text-[var(--text-primary)] md:text-3xl",children:C?"Загрузка…":S}),(null==(f=k.data)?void 0:f.headline)?(0,l.jsx)("p",{className:"text-sm text-muted",children:k.data.headline}):null,(null==(h=k.data)?void 0:h.summary)?(0,l.jsx)("p",{className:"text-sm text-[var(--text-primary)]",children:k.data.summary}):null]}),y?(0,l.jsx)("div",{className:"flex items-start",children:(0,l.jsx)(i(),{href:y,prefetch:!1,className:"inline-flex items-center gap-2 rounded-full border border-subtle px-4 py-2 text-sm font-medium text-[var(--text-primary)] transition-base hover:bg-surface-soft focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent-primary)] focus-visible:ring-offset-2 focus-visible:ring-offset-[var(--surface-0)]",children:null!=w?w:"← Вернуться"})}):null]})]}),A?(0,l.jsx)("div",{className:"rounded-3xl border border-red-200 bg-red-50 px-6 py-4 text-sm text-red-600",children:A}):null,(0,l.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,l.jsxs)("section",{className:"rounded-3xl border border-subtle bg-[var(--surface-0)] p-6",children:[(0,l.jsx)("h2",{className:"text-base font-semibold text-[var(--text-primary)]",children:"Информация"}),C?(0,l.jsx)("ul",{className:"mt-4 space-y-2",children:Array.from({length:3}).map((e,a)=>(0,l.jsx)("li",{className:"h-4 w-full animate-pulse rounded-full bg-surface-soft"},a))}):L.length>0?(0,l.jsx)("dl",{className:"mt-4 grid gap-3 text-sm",children:L.map(e=>(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("dt",{className:"text-xs uppercase tracking-wide text-muted",children:e.key}),(0,l.jsx)("dd",{className:"text-sm text-[var(--text-primary)]",children:e.value})]},e.key))}):(0,l.jsx)("p",{className:"mt-4 text-sm text-muted",children:"Подробности не заполнены."})]}),(0,l.jsxs)("section",{className:"rounded-3xl border border-subtle bg-[var(--surface-0)] p-6",children:[(0,l.jsx)("h2",{className:"text-base font-semibold text-[var(--text-primary)]",children:"Теги"}),C?(0,l.jsx)("ul",{className:"mt-4 flex flex-wrap gap-2",children:Array.from({length:4}).map((e,a)=>(0,l.jsx)("li",{className:"h-6 w-20 animate-pulse rounded-full bg-surface-soft"},a))}):E.length>0?(0,l.jsx)("ul",{className:"mt-4 flex flex-wrap gap-2",children:E.map(e=>(0,l.jsx)("li",{className:"rounded-full bg-surface-soft px-3 py-1 text-xs text-[var(--text-primary)]",children:e},e))}):(0,l.jsx)("p",{className:"mt-4 text-sm text-muted",children:"Нет тегов."})]})]}),(0,l.jsxs)("section",{className:"rounded-3xl border border-subtle bg-[var(--surface-0)] p-6",children:[(0,l.jsx)("h2",{className:"text-base font-semibold text-[var(--text-primary)]",children:"Секции"}),C?(0,l.jsx)("ul",{className:"mt-4 space-y-3",children:Array.from({length:2}).map((e,a)=>(0,l.jsx)("li",{className:"h-10 w-full animate-pulse rounded-xl bg-surface-soft"},a))}):_.length>0?(0,l.jsx)("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:_.map(e=>{var a;return(0,l.jsxs)("article",{className:"rounded-2xl border border-subtle bg-surface-soft p-4",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-[var(--text-primary)]",children:null!=(a=e.title)?a:e.id}),(0,l.jsx)("p",{className:"mt-1 text-xs text-muted",children:"Содержимое появится, когда владелец поделится доступом."})]},e.id)})}):(0,l.jsx)("p",{className:"mt-4 text-sm text-muted",children:"Для вас нет доступных секций."})]})]})})}},6128:(e,a,t)=>{"use strict";t.d(a,{w:()=>n});var l=t(5155);t(2115);var s=t(526);let r={none:"gap-0",sm:"gap-3",md:"gap-4",lg:"gap-6"};function n(e){let{spacing:a="md",className:t,children:n,...i}=e;return(0,l.jsx)("section",{className:(0,s.cn)("flex flex-col",r[a],t),...i,children:n})}},6771:(e,a,t)=>{Promise.resolve().then(t.bind(t,4548))},7621:(e,a,t)=>{"use strict";t.d(a,{Zq:()=>n,hD:()=>s,nr:()=>r});var l=t(5704);class s extends Error{constructor(e,a,t){super(e),this.name="ApiError",this.status=a,this.info=t}}async function r(e){var a,t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{skipAuth:n,headers:i,...d}=r,c=e.startsWith("http")?e:"".concat((null!=(t=null!=(a=l.env.NEXT_PUBLIC_API_BASE)?a:l.env.API_URL)?t:"").replace(/\/$/,"")).concat(e),o=await fetch(c,{credentials:n?"same-origin":"include",headers:{"Content-Type":"application/json",...null!=i?i:{}},...d});if(!o.ok){let e;try{e=await o.json()}catch(a){e=await o.text()}throw new s("string"==typeof e&&e.trim().length>0?e:"Ошибка запроса",o.status,e)}return 204===o.status?void 0:(o.headers.get("content-type")||"").includes("application/json")?await o.json():await o.text()}function n(e){let a=new URLSearchParams;Object.entries(e).forEach(e=>{let[t,l]=e;null!=l&&""!==l&&a.set(t,String(l))});let t=a.toString();return t?"?".concat(t):""}},8185:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var l=t(5155);t(2115);var s=t(2235),r=t(526),n=t(6128);function i(e){let{title:a,subtitle:t,description:i,actions:d,contentClassName:c,children:o}=e;return(0,l.jsx)(s.default,{title:a,subtitle:t,actions:d,children:(0,l.jsxs)(n.w,{className:(0,r.cn)("p-6 md:p-8",c),spacing:"lg","aria-labelledby":"page-title","data-testid":"page-layout",children:[(0,l.jsxs)("header",{className:"flex flex-col gap-2",children:[(0,l.jsx)("h1",{id:"page-title",className:"text-xl font-semibold tracking-tight text-[var(--text-primary)]","data-testid":"page-title",children:a}),i?(0,l.jsx)("p",{className:"text-sm text-muted",children:i}):null]}),o]})})}}}]);
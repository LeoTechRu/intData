# Vision Deck

`vision.md` агрегирует проработанные идеи из `idea.md` и описывает целевые решения на уровне концепций. Именно здесь фиксируется «как должно работать» до детализации задач.

## Структура
- **Инициатива / кодовое имя** — отсылка к записи в `idea.md` или эпикам BACKLOG.
- **Цель** — какую пользовательскую или операционную проблему решаем.
- **Ключевые сценарии** — пользовательские флоу, которые должны поддерживаться.
- **Технический подход** — основные решения по архитектуре, данным, API, UI.
- **Ограничения и риски** — технические, продуктовые, организационные.
- **Критерии успеха** — метрики, инварианты, признаки завершённости.

## Активные инициативы

### CRM Knowledge Hub (E18)
- **Цель** — построить собственную CRM, в которой сделки и участники жёстко связаны с PARA-контекстом и дополняются знаниями (заметки, решения, ретроспективы) по принципам Zettelkasten.
- **Ключевые сценарии**
  1. Руководитель продаж управляет цифровой воронкой, видит лиды по стадиям, конверсию и автоматизации (ориентир — amoCRM Digital Pipeline).
  2. Куратор Telegram-группы открывает карточку участника, видит покупки, статус обучения и историю общения из единого контакт-центра (ориентир — Bitrix24 CRM).
  3. Команда принимает решения быстрее, потому что карточка сделки показывает связанные заметки, решения и бэклинки (Zettelkasten-слой знаний).
- **Технический подход**
  - Модели `crm_accounts`, `crm_deals`, `crm_touchpoints` наследуют PARA (`area_id`/`project_id`) и синхронизируются через `init_app_once`.
  - Next.js-модуль `/crm` с канбан-доской, виджетами карточек и панелью знаний; переиспользуем React Query, AppShell и компонент `TermHint` для терминов.
  - Контакт-центр агрегирует email/chat/voice-транзакции: единый таймлайн, быстрые действия «ответить из CRM», статусы операторов.
  - Автоматизации описываются в DSL поверх `core/services` (триггеры по стадии, оплате, активности), с фичефлагами для поэтапного rollout.
  - Каждая заметка или решение хранит обратные ссылки (`backlinks`) на сделки и контакты, чтобы сохранить Zettelkasten-связность.
- **Ограничения и риски**
  - Высокая сложность автоматизаций требует фичефлагов и постепенной включаемости.
  - Интеграции с Telegram и платёжными системами могут увеличить время отклика; нужны очереди и idempotency.
  - UI может перегрузиться от данных — требуется модульность и progressive disclosure.
- **Критерии успеха**
  - Сделки, контакты и группы отображаются в PARA-обзорах без ручной синхронизации.
  - Канбан показывает стадии, конверсию и прогноз выручки, поддерживает drag-n-drop и запуск автоматизаций.
  - Контакт-центр объединяет входящие сообщения, звонки и ответы операторов в едином таймлайне.
  - Панель знаний в карточке сделки демонстрирует связанные заметки, решения и бэклинки; доступны быстрые действия для создания заметок/задач.
  - Документация в `docs/conventions.md` и `docs/CHANGELOG.md` отражает UX-паттерны, правила данных и эволюцию CRM.
